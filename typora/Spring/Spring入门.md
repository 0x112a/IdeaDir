# Spring

## Spring简介

### 什么是框架

![image-20211013165704798](img/image-20211013165704798.png)

### 框架有什么用

- 提高开发效率
- 增强可重用性
- 提供编写规范
- 节约维护成本
- 解耦底层实现原理

### Spring是什么

![image-20211013170209676](img/image-20211013170209676.png)

### Spring的体系结构

![image-20211013170557217](img/image-20211013170557217.png)

### Spring发展历程

![image-20211013170946186](img/image-20211013170946186.png)

### Spring的优势

![image-20211013171037001](img/image-20211013171037001.png)

## IOC简介

### 耦合与内聚

- ![image-20211013171707434](img/image-20211013171707434.png)

### IOC的出现---工厂模式衍化而来

  - ![image-20211013171841248](img/image-20211013171841248.png)
  - ![image-20211013171950935](img/image-20211013171950935.png)
  - ![image-20211013172246160](img/image-20211013172246160.png)
  - ![image-20211013172329023](img/image-20211013172329023.png)
###  IOC的概念
  - ![image-20211013172522661](img/image-20211013172522661.png)

## 入门案例

### 制作步骤

![image-20211013172941634](img/image-20211013172941634.png)

TODO

```java
```



## IOC配置(xml)

### Bean

- ![image-20211013173901714](img/image-20211013173901714.png)

- ![image-20211013174035988](img/image-20211013174035988.png)
- ![image-20211013174257730](img/image-20211013174257730.png)
- bean对象的创建方式
  - 静态工厂bean
    - ![image-20211013174714199](img/image-20211013174714199.png)
  - 实例工厂bean
    - ![image-20211013174733769](img/image-20211013174733769.png)

### DI

#### 简介

- ![image-20211013174851838](img/image-20211013174851838.png)

#### IOC与DI的关系

  - 是同一件事站在不同角度看待的问题

#### set方法注入(主流)

  - ![image-20211013175219220](img/image-20211013175219220.png)

#### 构造器注入(了解)

  - ![image-20211013175411267](img/image-20211013175411267.png)
  - ![image-20211013175640621](img/image-20211013175640621.png)

#### 集合数据类型注入

- ![image-20211013175935129](img/image-20211013175935129.png)
- list
  - ![image-20211013180039590](img/image-20211013180039590.png)
- props
  - ![image-20211013180118317](img/image-20211013180118317.png)
- array
  - ![image-20211013180140203](img/image-20211013180140203.png)
- set
  - ![image-20211013180214859](img/image-20211013180214859.png)
- map
  - ![image-20211013180240360](img/image-20211013180240360.png)

#### 使用p命名空间简化配置(了解)

![image-20211013181152440](img/image-20211013181152440.png)

#### spring EL(SpEL)表达式

- ![image-20211013181435490](img/image-20211013181435490.png)
- ![image-20211013181453275](img/image-20211013181453275.png)
- 

### properties文件

![image-20211013181610753](img/image-20211013181610753.png)

### 团队开发

- import 导入配置文件
- ![image-20211013181815229](img/image-20211013181815229.png)
- ![image-20211013181922290](img/image-20211013181922290.png)

### ApplicationContext

- ![image-20211013182034368](img/image-20211013182034368.png)
- ![image-20211013182106497](img/image-20211013182106497.png)

### 第三放资源配置

![image-20211013182140682](img/image-20211013182140682.png)

## 综合案例

#### Spring整合Mybatis

- ![image-20211013195357591](img/image-20211013195357591.png)
- 基础准备工作
  - ![image-20211013195428531](img/image-20211013195428531.png)
- 整合准备工作
  - ![image-20211013195541947](img/image-20211013195541947.png)

- 整合工作
  - ![image-20211013201246485](img/image-20211013201246485.png)

## 注解开发

### 注解驱动的意义

- 什么是注解驱动

  - ![image-20211013203205236](img/image-20211013203205236.png)

- 注解驱动的弊端

  - ![image-20211013203314548](img/image-20211013203314548.png)

  

### 常用注解(重点)

- 启动注解功能

  - ![image-20211013204500941](img/image-20211013204500941.png)

- bean注解定义

  - ![image-20211013204833706](img/image-20211013204833706.png)

- bean作用域

  - ![image-20211013210418004](img/image-20211013210418004.png)

- bean生命周期

  - ![image-20211013210717023](img/image-20211013210717023.png)

#### 加载第三方资源
  - ![image-20211013210907562](img/image-20211013210907562.png)

#### bean的非引用类型属性注入

- ![image-20211013211155371](img/image-20211013211155371.png)

#### bean的引用类型属性注入

- ![image-20211013211446642](img/image-20211013211446642.png)
- ![image-20211013211717786](img/image-20211013211717786.png)
- ![image-20211013211802929](img/image-20211013211802929.png)

#### 加载properties文件

- ![image-20211013212540073](img/image-20211013212540073.png)

#### 纯注解开发

- ![image-20211013213018103](img/image-20211013213018103.png) 

#### 第三方bean配置与管理
  - ![image-20211013213443664](img/image-20211013213443664.png)

### bean加载控制

- 依赖加载
  - ![image-20211013214114259](img/image-20211013214114259.png)
  - ![image-20211013214146479](img/image-20211013214146479.png)
  - ![image-20211013214346765](img/image-20211013214346765.png)
- 依赖加载应用场景
  - ![image-20211013214451647](img/image-20211013214451647.png) 

### 整合第三方技术(重点)

#### 注解整合MyBatis

![image-20211013215815677](img/image-20211013215815677.png)

##### 注解整合MyBatis分析

![image-20211013215915554](img/image-20211013215915554.png)

##### 注解整合MyBatis步骤

![image-20211013215945102](img/image-20211013215945102.png)

#### 注解整合Junit



### IOC底层核心原理

#### IOC核心接口



#### bean加载过程解析



#### bean初始化过程解析



## AOP

### AOP简介

- AOP概念
  - ![image-20211015213807057](img/image-20211015213807057.png)
- AOP作用
  - ![image-20211015213907834](img/image-20211015213907834.png)
- AOP优势
  - 提高代码的可重用性
  - 业务代码编码更简洁
  - 业务代码维护更高效
  - 业务功能扩展更便捷

### 入门案例

- **AOP的核心概念**
  - ![image-20211015214149015](img/image-20211015214149015.png)
  - ![image-20211015214226418](img/image-20211015214226418.png)
  - ![image-20211015214244035](img/image-20211015214244035.png)
  - ![image-20211015214318725](img/image-20211015214318725.png)
  - ![image-20211015214338651](img/image-20211015214338651.png)
  - ![image-20211015214415441](img/image-20211015214415441.png)
  - ![image-20211015214518338](img/image-20211015214518338.png)
  - ![image-20211015214628468](img/image-20211015214628468.png)
- AOP的工作流程分析
  - ![image-20211015214924823](img/image-20211015214924823.png)
- 案例
  - ![案例分析](img/image-20211015215054287.png)
  - ![image-20211015215757772](img/image-20211015215757772.png)
  - 

### AOP配置（XML）

#### 切入点

- AspectJ
  - ![image-20211015215927152](img/image-20211015215927152.png)
- AOP配置
  - ![image-20211015220305224](img/image-20211015220305224.png)
  - ![image-20211015220343225](img/image-20211015220343225.png)
  - ![image-20211015220408595](img/image-20211015220408595.png)
  - ![image-20211015220542075](img/image-20211015220542075.png)
- 切入点
  - 切入点描述的是某个方法
  - 切入点表达式是一个快速匹配方法描述的通配格式，类似于正则表达式
  - ![image-20211015220951363](img/image-20211015220951363.png)
  - **切入点表达式-关键字**
  - ![image-20211015221059721](img/image-20211015221059721.png)
  - **切入点表达-通配符**
  - ![image-20211015221318107](img/image-20211015221318107.png)
  - **切入点表达式-逻辑表达式**
  - ![image-20211015221403750](img/image-20211015221403750.png)
  - **切入点表达式-范例**
  - ![image-20211015221746846](img/image-20211015221746846.png)
  - 切入点的三种配置方式
  - ![image-20211016143508229](img/image-20211016143508229.png)
  - 切入点配置经验
  - ![image-20211016143843806](img/image-20211016143843806.png)
  - 

#### 通知

- 通知类型
  - ![image-20211016144309888](img/image-20211016144309888.png)
- 前置通知
  - ![image-20211016144550376](img/image-20211016144550376.png)
- 后置通知
  - ![image-20211016144705343](img/image-20211016144705343.png)
- 返回后通知
  - ![image-20211016144732298](img/image-20211016144732298.png)
- 抛出异常后通知
  - ![image-20211016144807917](img/image-20211016144807917.png)
- 环绕通知
  - ![image-20211016144835643](img/image-20211016144835643.png)
- 环绕通知的开发方式
  - ![image-20211016144919732](img/image-20211016144919732.png)
- 通知顺序(了解)
  - 当同一个切入点配置了多个通知时,通知存在运行的先后顺序,顺序以通知配置的顺序为准
- 通知获取参数
  - 参数
    - 通知获取参数数据
      - ![image-20211016150436882](img/image-20211016150436882.png)
      - ![image-20211016150628833](img/image-20211016150628833.png)
      - ![调整参数位置](img/image-20211016150730344.png)
  - 返回值
    - ![image-20211016150811332](img/image-20211016150811332.png)

  - 异常
    - ![image-20211016153115337](img/image-20211016153115337.png) 
    - ![image-20211016153306178](img/image-20211016153306178.png)

### AOP配置（注解）

- ![image-20211016153754812](img/image-20211016153754812.png)

- ![image-20211016154401638](img/image-20211016154401638.png)

- ![image-20211016154417436](img/image-20211016154417436.png)

- ![image-20211016154439901](img/image-20211016154439901.png)

- ![image-20211016154507823](img/image-20211016154507823.png)

- ![image-20211016154554835](img/image-20211016154554835.png)

- ![image-20211016154614798](img/image-20211016154614798.png) 

- ![image-20211016154527709](img/image-20211016154527709.png)

- 注解开发AOP注意事项

  - ![image-20211016154135200](img/image-20211016154135200.png)

- 注解AOP通知执行顺序(了解)

  - ![image-20211016155601602](img/image-20211016155601602.png)

- 纯注解开发

  - ![image-20211016160120433](img/image-20211016160120433.png)

    

### 综合案例

![image-20211016161354371](img/image-20211016161354371.png)

![image-20211016161418928](img/image-20211016161418928.png)

### AOP底层原理

#### 装饰者模式



#### JDKProxy动态代理



#### Cglib代理



#### 织入时机



## 事务管理

- 事务是数据操作最基本单元,逻辑上一组操作,要么都成功,如果有一个失败所有的操作都失败
- 事物的四个特性(ACID)
  -  原子性
  - 一致性
  - 隔离性
  - 持久性
