# 操作系统引论

Operating System 是配置在计算机硬件上的第一层软件，是对硬件系统的首次扩充。

## 概述

1. 目标：

   - **方便性**（方便用户使用）

   - **有效性**（提高系统资源利用率OR提高系统吞吐量）
   - 可扩充性
   - 开放性

2. 作用

   - OS作为用户与计算机硬件系统之间的接口
   - OS作为计算机系统资源的管理者
   - OS实现了对计算机资源的抽象

3. 推动OS发展的主要动力

   - 不断提高计算机资源的利用率
   - 方便用户
   - 器件的不断更新换代
   - 计算机体系结构的不断发展
   - 不断提出新的应用需求

## 发展过程

1. **未配置OS的计算机系统**

   - 人工操作的方式

     ​	特点

     - 用户独占全机
     - CPU等待人工操作

   - 脱机输入输出方式（off-line I/O）

     ​	优点：

     - 减少了CPU的空闲时间
     - 提高了I/O速度

2. **单道批处理系统**

   - 处理过程

   - 缺点

     ​	系统中的资源得不到充分的利用

3. **多道批处理系统**

   - 基本概念
   - 优缺点
     - 资源利用率高
     - 系统吞吐量大
     - 平均周转时间长
     - 无交互能力
   - 需要解决的问题
     - 处理机争用问题
     - 内存分配和保护问题
     - I/O设备分配问题
     - 文件的组织和管理问题
     - 作业管理问题
     - 用户与系统的接口问题

4. **分时系统**

   ​	在一台主机上连接了多个配有显示器和键盘的终端并由此所组成的系统。

   - 引入

     ​	为了满足用户对人机交互的需求

     - 人机交互
     - 共享主机

   - 关键问题

     - 及时接收
     - 及时处理
       1. 作业直接进入内存
       2. 采用轮转运行方式

   - 特征

     - 多路性
     - 独立性
     - 及时性
     - 交互性

5. **实时系统**

   ​	实时系统是指系统能及时响应外部事件的请求，在规定的时间内完成对该事件的处理，并控制所有实时任务协调一致地运行。

   - 实时系统的类型

     - 工业武器控制系统
     - 信息查询系统
     - 多媒体系统
     - 嵌入式系统

   - 实时任务的类型

     - 周期性实时任务和非周期性实时任务

       ​	都必须有deadline：

        - 开始截止时间
        - 完成截止时间

     - 硬实时任务和软实时任务

        - 对deadline的敏感程度不一样

   - 与分时系统的比较

     - 多路性
     - 独立性
     - 及时性
     - 交互性
     - 可靠性

6. 微机操作系统的发展

   - 单用户单任务操作系统
   - 单用户多任务操作系统
   - 多用户多任务操作系统
   - 多用户多任务操作系统

## 操作系统的基本特性

1. **并发（Concurrence)**

   - **并发**与**并行**的区别
   - 引入进程

2. **共享（Sharing)**

   - 互斥共享方式
   - 同时访问方式（宏观下）

3. **虚拟（Virtual)**

   ​	通过“空分复用”或“时分复用”技术，将一条物理信道变为若干条逻辑信道。

   - 时分复用技术
   - 空分复用技术

4. **异步（Asynchronism）**

   ​	进程是以人们不可预知的速度向前推进的。

   ​	进程同步机制是负责在同样的环境下作业多次运行，得到的结构也是相同的。

## 操作系统的主要功能

​	引入OS的主要目的是，为多道程序的运行提供良好的运行环境，以保证多道程序有条不紊地、高效地运行，并能最大程度地提高系统中各种资源的利用率，方便用户的使用。

​	为此，在传统的OS中应具有处理机管理、存储器管理、设备管理和文件管理等基本功能。此外为方便用户使用OS，还需向用户提供方便的用户接口。

1. **处理机管理功能**（可归结为对**进程的管理**）

   ​	主要功能有：创建和撤销进程，对诸进程的运行进行协调，实现进程之间的信息交换，以及按照一定的算法把处理机分配给进程。

   - 进程控制
     - 进程的创建与撤销
     - 为进程创建线程，提高并发性
     - 撤销时回收资源
   - 进程同步
     - 为进程或线程的运行进行协调
     - 进程互斥方式
     - 进程同步方式
   - 进程通信
     - 实现合作进程之间的信息交换
   - 调度
     - 作业调度
     - 进程调度

2. **存储器管理功能**

   ​	主要任务是：为多道程序的运行提供良好的环境，提高存储器的利用率，方便用户使用，并能从逻辑上扩充内存。为此，存储器管理应具有内存分配和回收、内存保护、地址映射和内存扩充功能。

   - 内存分配
     - 为程序分配内存
     - 提高存储器的利用率
     - 可以为运行时的程序增加内存
   - 内存保护
     - 确保每道用户程序都在自己的内存空间内运行，互不干扰
     - 绝不允许用户程序访问操作系统的程序和数据
   - 地址映射
   - 内存扩充（虚拟存储技术）
     - 请求调入
     - 置换功能

3. **设备管理功能**

   ​	完成用户进程提出的I/O请求，为用户进程分配所需的I/O设备，并完成指定的操作。

   ​	提高CUP和I/O设备的利用率，提高I/O速度，方便用户使用I/O设备。

   - 缓冲管理
     - 缓和CPU和I/O设备速度不匹配
     - 提高CPU利用率
     - 提高系统的吞吐量
   - 设备分配
     - 为提出I/O申请的用户进程分配I/O设备
   - 设备处理（设备驱动程序）
     - 用于实现CPU和设备控制器之间的通信。

4. **文件管理功能**

   ​	对用户文件和系统文件进行管理以方便用户使用，并保证文件的安全性。

   - 文件存储空间的管理
   - 目录管理
   - 文件的读写管理和保护

5. **操作系统与用户之间的接口**

   - 用户接口
     - 联机用户接口
     - 脱机用户接口
     - 图形用户接口
   - 程序接口

6. **现代操作系统的新功能**

   - 系统安全
     - 认证技术
     - 密码技术
     - 访问控制技术
     - 反病毒技术
   - 网络功能和服务
     - 网络通信
     - 资源管理
     - 应用互操作
   - 支持多媒体
     - 接纳控制功能
     - 实时调度
     - 多媒体文件的存储

## OS结构设计

1. 传统操作系统结构
   - 无结构
   - 模块化结构
     - 模块化程序设计技术的基本概念：基于“分解”和“模块化”的原则来控制大型软件的复杂度。
     - 模块独立性,衡量模块独立性的标准：
       - 内聚性
       - 耦合性
     - 模块接口的法的优缺点
       - 提高OS设计的正确性、可确定性和可维护性
       - 增强OS的可适应性
       - 加速OS的开发速度
       - 在OS设计时，对各模块间的接口规定很难满足在模块设计完成后对接口的实际需求
       - 在OS设计阶段，设计者必须做出一系列的决策，每一个决定必须建立在上一个决定的基础上。但很难实现。
   - 分层结构OS
     - 基本概念：
       - 将模块-接口法中“决定顺序”的无序性变为有序性，引入了有序分层法。自低向上的分层设计的基本原则是：每一步的设计都建立在可靠的基础上。类似ISO/TCP分层。
     - 优缺点
       - 易保证系统的正确性
       - 易扩充和易维护性
       - 系统效率降低
2. 客户/服务器模式的由来、组成和类型
   - 组成
     - 客户机
     - 服务器
     - 网络系统
   - 交互
     - 客户发送请求消息
     - 服务器接收消息
     - 服务器回送消息
     - 客户机接受消息
   - 优点
     - 数据的分布处理和存储
     - 便于集中管理
     - 灵活性和可扩从性
     - 易于改编应用软件
   - 不足之处在于不可靠性和瓶颈问题
3. 面向对象的的程序设计
   - 基本概念
     - 对象：是利用被封装的数据结构（变量）和一组对它进行操作的过程（方法）来表示系统中的某个对象。
     - 对象类：类是在对象上的抽象，对象则是类的实例。
     - 继承：继承特征可使定义子类变得更容易。
   - 面向对象技术的优点
     - 通过“重用”提高产品质量和生产效率。
     - 使系统具有更好的易于修改性和易于扩展性。
     - 更易于保证系统的“正确性”和“可靠性”。
4. 微内核OS结构
   - 基本概念
     - 足够小的内核
     - 基于客户/服务器模式
     - 应用“机制与策略分离”原理
     - 采用面向对象技术
   - 基本功能
     - 进程（线程）管理
     - 低级存储器管理
     - 中断和陷入处理
   - 优点
     - 提高了系统的可扩展性
     - 增强了系统的可靠性
     - 可移植性强
     - 提供了对分布式系统的支持
     - 融入了面向对象技术
   - 存在的问题
     - 运行效率有所降低
     - 在结构与效率间寻找平衡





